<!doctype html>
<html lang="en" class="theme-fs-sm" data-bs-theme="light" data-bs-theme-color="default" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Chi tiết lịch khám - KiviCare</title>
    <!-- Import existing CSS files -->
    <link rel="shortcut icon" href="./assets/images/favicon.ico" />
    <link rel="stylesheet" href="./assets/css/core/libs.min.css" />
    <link rel="stylesheet" href="./assets/css/kivicare.min.css?v=1.4.1" />
    <link rel="stylesheet" href="./assets/css/custom.min.css?v=1.4.1" />
</head>
<body class="">
    <!-- Include existing sidebar -->
    <aside class="sidebar sidebar-base" id="first-tour" data-toggle="main-sidebar" data-sidebar="responsive">
        <div class="sidebar-header d-flex align-items-center justify-content-start position-relative">
            <a href="./doctor-dashboard.html" class="navbar-brand">
                <div class="logo-main">
                    <img class="logo-normal img-fluid" src="./assets/images/logo.png" height="30" alt="logo">
                    <img class="logo-mini img-fluid" src="./assets/images/logo-mini.png" height="30" alt="logo">
                </div>
            </a>
        </div>
        
        <div class="sidebar-body pt-0 data-scrollbar">
            <div class="sidebar-list">
                <ul class="navbar-nav iq-main-menu" id="sidebar-menu">
                    <li class="nav-item static-item">
                        <a class="nav-link static-item disabled text-start" href="#" tabindex="-1">
                            <span class="default-icon">Doctor Panel</span>
                            <span class="mini-icon">-</span>
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="./doctor-dashboard.html">
                            <span class="item-name">My Dashboard</span>
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="./my-appointments.html">
                            <span class="item-name">My Appointments</span>
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link active" href="./patient-schedule.html">
                            <span class="item-name">Chi tiết lịch khám</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </aside>

    <main class="main-content">
        <div class="position-relative">
            <!-- Navigation -->
            <nav class="nav navbar navbar-expand-xl navbar-light iq-navbar">
                <div class="container-fluid navbar-inner">
                    <a href="./doctor-dashboard.html" class="navbar-brand">
                        <div class="logo-main"></div>
                    </a>
                    
                    <div class="sidebar-toggle" data-toggle="sidebar" data-active="true">
                        <i class="icon d-flex"></i>
                    </div>
                    
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="mb-2 navbar-nav ms-auto align-items-center navbar-list mb-lg-0">
                            <!-- User menu items -->
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <div class="content-inner container-fluid pb-0" id="page_layout">

<div class="d-flex align-items-center mb-4 pb-3 pt-3">
    <svg class="icon-18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M9.15722 20.7714V17.7047C9.1572 16.9246 9.79312 16.2908 10.581 16.2856H13.4671C14.2587 16.2856 14.9005 16.9209 14.9005 17.7047V17.7047V20.7809C14.9003 21.4432 15.4343 21.9845 16.103 22H18.0271C19.9451 22 21.5 20.4607 21.5 18.5618V18.5618V9.83784C21.4898 9.09083 21.1355 8.38935 20.538 7.93303L13.9577 2.6853C12.8049 1.77157 11.1662 1.77157 10.0134 2.6853L3.46203 7.94256C2.86226 8.39702 2.50739 9.09967 2.5 9.84736V18.5618C2.5 20.4607 4.05488 22 5.97291 22H7.89696C8.58235 22 9.13797 21.4499 9.13797 20.7714V20.7714" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
    <svg class="mx-1 icon-18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.5 5L15.5 12L8.5 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
    <a href="./doctor-dashboard.html" class="text-decoration-none">Dashboard</a>
    <svg class="mx-1 icon-18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.5 5L15.5 12L8.5 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg>
    <span class="head-title fw-500 mt-1">Chi tiết lịch khám</span>
</div>

<!-- Header với tên bác sĩ -->
<div class="card mb-3">
    <div class="card-body py-3">
        <div class="d-flex align-items-center justify-content-between">
            <div>
                <h4 class="mb-1" id="doctorPageTitle">Bác sĩ Đang tải...</h4>
                <p class="text-muted mb-0">Quản lý lịch khám bệnh nhân</p>
            </div>
            <div class="text-end">
                <small class="text-muted">Tổng lịch khám: </small>
                <span class="badge bg-primary fs-6" id="totalAppointments">0</span>
            </div>
        </div>
    </div>
</div>

<!-- Filter and Search Section -->
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">Bộ lọc tìm kiếm</h5>
    </div>
    <div class="card-body">
        <form id="filterForm">
            <div class="row g-3">
                <div class="col-md-2">
                    <label class="form-label">Từ ngày:</label>
                    <input type="date" class="form-control" id="fromDateFilter">
                </div>
                <div class="col-md-2">
                    <label class="form-label">Đến ngày:</label>
                    <input type="date" class="form-control" id="toDateFilter">
                </div>
                <div class="col-md-2">
                    <label class="form-label">Tên bệnh nhân:</label>
                    <input type="text" class="form-control" id="patientNameFilter" placeholder="Nhập tên...">
                </div>
                <div class="col-md-2">
                    <label class="form-label">Trạng thái:</label>
                    <select class="form-select" id="statusFilter">
                        <option value="">Tất cả</option>
                        <option value="Pending">Chờ khám</option>
                        <option value="InProgress">Đang khám</option>
                        <option value="Completed">Khám xong</option>
                        <option value="Cancelled">Đã hủy</option>
                    </select>
                </div>
                <div class="col-md-1 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="fas fa-filter"></i> Lọc
                    </button>
                </div>
            </div>
        </form>
        
        <div class="row mt-3">
            <div class="col-12">
                <button type="button" class="btn btn-info me-2" onclick="loadTodaySchedule()">
                    <i class="fas fa-calendar-day"></i> Lịch hôm nay
                </button>
                <button type="button" class="btn btn-success me-2" onclick="loadThisWeekSchedule()">
                    <i class="fas fa-calendar-week"></i> Tuần này
                </button>
                <button type="button" class="btn btn-warning" onclick="clearFilters()">
                    <i class="fas fa-undo"></i> Xóa bộ lọc
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Results Section -->
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <div>
            <h5 class="card-title mb-0">Danh sách lịch khám</h5>
            <small class="text-muted" id="resultCount">Chọn bác sĩ để xem lịch khám</small>
        </div>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover table-striped" id="scheduleTable">
                <thead class="table-dark">
                    <tr>
                        <th>#</th>
                        <th>Mã BN</th>
                        <th>Tên bệnh nhân</th>
                        <th>Thời gian khám</th>
                        <th>Ngày</th>
                        <th>Giờ</th>
                        <th>Trạng thái</th>
                        <th>Xem báo cáo khám</th> <!-- SỬA TỪ "Thao tác" THÀNH "Xem báo cáo khám" -->
                    </tr>
                </thead>
                <tbody id="scheduleTableBody">
                    <tr>
                        <td colspan="8" class="text-center py-4">
                            <i class="fas fa-search fa-2x text-muted mb-2"></i>
                            <p class="text-muted">Sử dụng bộ lọc để tìm kiếm lịch khám</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Pagination -->
        <nav aria-label="Page navigation" id="paginationSection" style="display: none;">
            <ul class="pagination justify-content-center" id="pagination">
                <!-- Pagination will be generated here -->
            </ul>
        </nav>
    </div>
</div>

<!-- Patient Detail Modal -->
<div class="modal fade" id="patientDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Chi tiết bệnh nhân</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="patientDetailContent">
            </div>
        </div>
    </div>
</div>

        </div>
    </main>
    <script src="./assets/js/core/libs.min.js"></script>
    <script src="./assets/js/kivicare.js"></script>
    <script src="./assets/js/patient-schedule.js"></script>
</body>
</html>